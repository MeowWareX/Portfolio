name: Compress Images

on:
  pull_request:
    paths:
      - '**/*.jpg'
      - '**/*.jpeg'
      - '**/*.png'
      - '**/*.webp'

jobs:
  compress-images:
    if: github.event.pull_request.head.repo.full_name == github.repository
    name: Compress Images
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Compress Images
        uses: photogabble/image-actions@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          paths: |
            images/** 
            img/**    
          extensions: jpg,jpeg,png,webp
          quality: 80
          strip_metadata: true
